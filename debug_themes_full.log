+ readonly SCRIPT_NAME=Bashmenu
+ SCRIPT_NAME=Bashmenu
+ readonly SCRIPT_VERSION=2.0
+ SCRIPT_VERSION=2.0
+ readonly 'SCRIPT_AUTHOR=JESUS VILLALOBOS'
+ SCRIPT_AUTHOR='JESUS VILLALOBOS'
+++ dirname main.sh
++ cd .
++ pwd
+ readonly SCRIPT_DIR=/home/stk/GIT/Bashmenu/src
+ SCRIPT_DIR=/home/stk/GIT/Bashmenu/src
++ dirname /home/stk/GIT/Bashmenu/src
+ readonly PROJECT_ROOT=/home/stk/GIT/Bashmenu
+ PROJECT_ROOT=/home/stk/GIT/Bashmenu
+ readonly CONFIG_FILE=/home/stk/GIT/Bashmenu/config/config.conf
+ CONFIG_FILE=/home/stk/GIT/Bashmenu/config/config.conf
+ RED='\033[0;31m'
+ GREEN='\033[0;32m'
+ YELLOW='\033[1;33m'
+ BLUE='\033[0;34m'
+ PURPLE='\033[0;35m'
+ CYAN='\033[0;36m'
+ WHITE='\033[1;37m'
+ NC='\033[0m'
+ trap cleanup SIGINT SIGTERM
+ [[ main.sh == \m\a\i\n\.\s\h ]]
+ parse_arguments
+ case "${1:-}" in
+ main
+ check_requirements
+ print_info 'Checking system requirements...'
+ echo -e '\033[0;34mâ„¹ Checking system requirements...\033[0m'
[0;34mâ„¹ Checking system requirements...[0m
+ local errors=0
+ required_commands=('bash' 'clear' 'date' 'hostname' 'uname')
+ local required_commands
+ for cmd in "${required_commands[@]}"
+ command -v bash
+ for cmd in "${required_commands[@]}"
+ command -v clear
+ for cmd in "${required_commands[@]}"
+ command -v date
+ for cmd in "${required_commands[@]}"
+ command -v hostname
+ for cmd in "${required_commands[@]}"
+ command -v uname
+ required_files=('utils.sh' 'commands.sh' 'menu.sh')
+ local required_files
+ for file in "${required_files[@]}"
+ [[ ! -f /home/stk/GIT/Bashmenu/src/utils.sh ]]
+ for file in "${required_files[@]}"
+ [[ ! -f /home/stk/GIT/Bashmenu/src/commands.sh ]]
+ for file in "${required_files[@]}"
+ [[ ! -f /home/stk/GIT/Bashmenu/src/menu.sh ]]
+ [[ 0 -gt 0 ]]
+ print_success 'Requirements check passed'
+ echo -e '\033[0;32mâœ“ Requirements check passed\033[0m'
[0;32mâœ“ Requirements check passed[0m
+ return 0
+ initialize_system
+ print_info 'Initializing Bashmenu system...'
+ echo -e '\033[0;34mâ„¹ Initializing Bashmenu system...\033[0m'
[0;34mâ„¹ Initializing Bashmenu system...[0m
+ [[ -f /home/stk/GIT/Bashmenu/config/config.conf ]]
+ source /home/stk/GIT/Bashmenu/config/config.conf
++ MENU_TITLE='System Administration Menu'
++ ENABLE_COLORS=true
++ AUTO_REFRESH=false
++ SHOW_TIMESTAMP=true
++ DEFAULT_THEME=default
++ AVAILABLE_THEMES=("default" "dark" "colorful" "minimal")
++ LOG_LEVEL=1
++ LOG_FILE=/tmp/bashmenu.log
++ ENABLE_HISTORY=true
++ HISTORY_FILE=/home/stk/.bashmenu_history.log
++ ENABLE_PERMISSIONS=false
++ ADMIN_USERS=("root" "admin")
++ COMMANDS=("System Information|uname -a|Show detailed system information|1" "Disk Usage|df -h|Show disk space usage|1" "Memory Usage|free -h|Show memory usage|1" "Running Processes|ps aux --sort=-%cpu|Show running processes|1" "Network Status|netstat -tuln|Show network connections|2" "System Load|uptime|Show system load|1" "User Management|who|Show logged users|1" "Package Updates|apt list --upgradable 2>/dev/null|Show available updates|2")
++ ENABLE_PLUGINS=true
++++ dirname main.sh
+++ dirname .
++ PLUGIN_DIR=./plugins
++ ENABLE_NOTIFICATIONS=true
++ NOTIFICATION_DURATION=3000
++ AUTO_BACKUP=true
++ BACKUP_RETENTION_DAYS=7
++ BACKUP_DIR=/home/stk/.bashmenu/backups
+ print_success 'Configuration loaded from /home/stk/GIT/Bashmenu/config/config.conf'
+ echo -e '\033[0;32mâœ“ Configuration loaded from /home/stk/GIT/Bashmenu/config/config.conf\033[0m'
[0;32mâœ“ Configuration loaded from /home/stk/GIT/Bashmenu/config/config.conf[0m
+ load_modules
+ print_info 'Loading system modules...'
+ echo -e '\033[0;34mâ„¹ Loading system modules...\033[0m'
[0;34mâ„¹ Loading system modules...[0m
+ [[ -f /home/stk/GIT/Bashmenu/src/utils.sh ]]
+ source /home/stk/GIT/Bashmenu/src/utils.sh
++ RED='\033[0;31m'
++ GREEN='\033[0;32m'
++ YELLOW='\033[1;33m'
++ BLUE='\033[0;34m'
++ PURPLE='\033[0;35m'
++ CYAN='\033[0;36m'
++ WHITE='\033[1;37m'
++ NC='\033[0m'
++ BOLD_RED='\033[1;31m'
++ BOLD_GREEN='\033[1;32m'
++ BOLD_YELLOW='\033[1;33m'
++ BOLD_BLUE='\033[1;34m'
++ export RED GREEN YELLOW BLUE PURPLE CYAN WHITE NC
++ export BOLD_RED BOLD_GREEN BOLD_YELLOW BOLD_BLUE
+ print_success 'Utils module loaded'
+ echo -e '\033[0;32mâœ“ Utils module loaded\033[0m'
[0;32mâœ“ Utils module loaded[0m
+ [[ -f /home/stk/GIT/Bashmenu/src/commands.sh ]]
+ source /home/stk/GIT/Bashmenu/src/commands.sh
++ declare -f log_warn
++ declare -f log_info
++ declare -f log_error
++ declare -f log_debug
+ print_success 'Commands module loaded'
+ echo -e '\033[0;32mâœ“ Commands module loaded\033[0m'
[0;32mâœ“ Commands module loaded[0m
+ [[ -f /home/stk/GIT/Bashmenu/src/menu.sh ]]
+ source /home/stk/GIT/Bashmenu/src/menu.sh
+++ dirname main.sh
++ source ./utils.sh
+++ RED='\033[0;31m'
+++ GREEN='\033[0;32m'
+++ YELLOW='\033[1;33m'
+++ BLUE='\033[0;34m'
+++ PURPLE='\033[0;35m'
+++ CYAN='\033[0;36m'
+++ WHITE='\033[1;37m'
+++ NC='\033[0m'
+++ BOLD_RED='\033[1;31m'
+++ BOLD_GREEN='\033[1;32m'
+++ BOLD_YELLOW='\033[1;33m'
+++ BOLD_BLUE='\033[1;34m'
+++ export RED GREEN YELLOW BLUE PURPLE CYAN WHITE NC
+++ export BOLD_RED BOLD_GREEN BOLD_YELLOW BOLD_BLUE
+++ dirname main.sh
++ source ./commands.sh
+++ declare -f log_warn
+++ declare -f log_info
+++ declare -f log_error
+++ declare -f log_debug
++ declare -a menu_options
++ declare -a menu_commands
++ declare -a menu_descriptions
++ declare -a menu_levels
++ declare -A themes
++ themes["default_frame_top"]=â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
++ themes["default_frame_bottom"]=â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
++ themes["default_frame_left"]=â”‚
++ themes["default_frame_right"]=â”‚
++ themes["default_title_color"]='\033[1;36m'
++ themes["default_option_color"]='\033[0m'
++ themes["default_selected_color"]='\033[1;32m'
++ themes["default_error_color"]='\033[1;31m'
++ themes["default_success_color"]='\033[1;32m'
++ themes["default_warning_color"]='\033[1;33m'
++ themes["dark_frame_top"]=â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
++ themes["dark_frame_bottom"]=â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
++ themes["dark_frame_left"]=â”‚
++ themes["dark_frame_right"]=â”‚
++ themes["dark_title_color"]='\033[1;35m'
++ themes["dark_option_color"]='\033[0;37m'
++ themes["dark_selected_color"]='\033[1;33m'
++ themes["dark_error_color"]='\033[1;31m'
++ themes["dark_success_color"]='\033[1;32m'
++ themes["dark_warning_color"]='\033[1;33m'
++ themes["colorful_frame_top"]=â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
++ themes["colorful_frame_bottom"]=â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
++ themes["colorful_frame_left"]=â•‘
++ themes["colorful_frame_right"]=â•‘
++ themes["colorful_title_color"]='\033[1;31m'
++ themes["colorful_option_color"]='\033[0;36m'
++ themes["colorful_selected_color"]='\033[1;33m'
++ themes["colorful_error_color"]='\033[1;31m'
++ themes["colorful_success_color"]='\033[1;32m'
++ themes["colorful_warning_color"]='\033[1;33m'
++ themes["minimal_frame_top"]=
++ themes["minimal_frame_bottom"]=
++ themes["minimal_frame_left"]=
++ themes["minimal_frame_right"]=
++ themes["minimal_title_color"]='\033[1m'
++ themes["minimal_option_color"]='\033[0m'
++ themes["minimal_selected_color"]='\033[1;32m'
++ themes["minimal_error_color"]='\033[1;31m'
++ themes["minimal_success_color"]='\033[1;32m'
++ themes["minimal_warning_color"]='\033[1;33m'
++ export -f initialize_menu
++ export -f add_menu_item
++ export -f load_theme
++ export -f display_header
++ export -f display_menu
++ export -f display_footer
++ export -f read_input
++ export -f handle_keyboard_input
++ export -f validate_numeric_input
++ export -f menu_loop
++ export -f execute_menu_item
++ export -f exit_menu
++ export -f search_menu
++ export -f display_filtered_menu
++ declare -f log_warn
++ declare -f log_info
++ declare -f log_error
++ declare -f log_debug
+ print_success 'Menu module loaded'
+ echo -e '\033[0;32mâœ“ Menu module loaded\033[0m'
[0;32mâœ“ Menu module loaded[0m
+ return 0
+ declare -f initialize_menu
+ initialize_menu
+ menu_options=()
+ menu_commands=()
+ menu_descriptions=()
+ menu_levels=()
+ add_menu_item 'System Information' cmd_system_info 'Show detailed system information' 1
+ local 'display_name=System Information'
+ local command=cmd_system_info
+ local 'description=Show detailed system information'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'Disk Usage' cmd_disk_usage 'Show disk space usage' 1
+ local 'display_name=Disk Usage'
+ local command=cmd_disk_usage
+ local 'description=Show disk space usage'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'Memory Usage' cmd_memory_usage 'Show memory usage' 1
+ local 'display_name=Memory Usage'
+ local command=cmd_memory_usage
+ local 'description=Show memory usage'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'Running Processes' cmd_running_processes 'Show top running processes' 1
+ local 'display_name=Running Processes'
+ local command=cmd_running_processes
+ local 'description=Show top running processes'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'Network Status' cmd_network_status 'Show network connections' 2
+ local 'display_name=Network Status'
+ local command=cmd_network_status
+ local 'description=Show network connections'
+ local level=2
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'System Load' cmd_system_load 'Show system load' 1
+ local 'display_name=System Load'
+ local command=cmd_system_load
+ local 'description=Show system load'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'User Management' cmd_user_management 'Show logged users' 1
+ local 'display_name=User Management'
+ local command=cmd_user_management
+ local 'description=Show logged users'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'Package Updates' cmd_package_updates 'Show available updates' 2
+ local 'display_name=Package Updates'
+ local command=cmd_package_updates
+ local 'description=Show available updates'
+ local level=2
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'System Monitoring' cmd_monitor_system 'Monitor system resources' 1
+ local 'display_name=System Monitoring'
+ local command=cmd_monitor_system
+ local 'description=Monitor system resources'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'System Maintenance' cmd_system_maintenance 'Run maintenance tasks' 2
+ local 'display_name=System Maintenance'
+ local command=cmd_system_maintenance
+ local 'description=Run maintenance tasks'
+ local level=2
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item 'Show Help' cmd_show_help 'Display help information' 1
+ local 'display_name=Show Help'
+ local command=cmd_show_help
+ local 'description=Display help information'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ add_menu_item Exit exit_menu 'Exit the menu' 1
+ local display_name=Exit
+ local command=exit_menu
+ local 'description=Exit the menu'
+ local level=1
+ menu_options+=("$display_name")
+ menu_commands+=("$command")
+ menu_descriptions+=("$description")
+ menu_levels+=("$level")
+ print_success 'Menu initialized'
+ echo -e '\033[0;32mâœ“ Menu initialized\033[0m'
[0;32mâœ“ Menu initialized[0m
+ declare -f load_theme
+ load_theme default
+ local theme_name=default
+ frame_top=
+ frame_bottom=
+ frame_left=
+ frame_right=
+ title_color=
+ option_color=
+ selected_color=
+ error_color=
+ success_color=
+ warning_color=
+ [[ -z '' ]]
+ [[ default != \d\e\f\a\u\l\t ]]
+ [[ -z '' ]]
+ [[ default == \d\e\f\a\u\l\t ]]
+ log_error 'Default theme not found. Menu cannot be displayed.'
+ echo -e '[ERROR] Default theme not found. Menu cannot be displayed.'
[ERROR] Default theme not found. Menu cannot be displayed.
+ exit 1
